---
import { Image } from "astro:assets";
import config from "@/config/config.json";
import { getSinglePage } from "@/lib/contentParser.astro";
import dateFormat from "@/lib/utils/dateFormat";
import { humanize,slugify } from "@/lib/utils/textConverter";
import { BiCalendarEdit,BiCategoryAlt } from "react-icons/bi";
const { summary_length } = config.settings;
const { className, posts, fluid } = Astro.props;
---
<!-- Use section for a grouping of content that represents a significant theme or topic -->
<section class={`row gy-5 gx-4 ${className} ${posts.length == 1 ? "justify-center" : ""} `}>
  {
    posts.map((post: any, i: number) => (
      <!-- Use article for each post as it should be independently distributable or reusable -->
      <article class={i === 0 && fluid !== false ? "col-12" : "col-12 sm:col-6"}>
        {post.data.image && (
          <a href={`/${post.slug}`} class="rounded-lg block hover:text-primary overflow-hidden group">
              <Image
                class="group-hover:scale-[1.03] transition duration-300 w-full object-cover"
                style={`min-width: ${i === 0 ? '925px' : '445px'}; min-height: ${i === 0 ? '475px' : '230px'}; max-width: ${i === 0 ? '925px' : '445px'}; max-height: ${i === 0 ? '475px' : '230px'};`}
                src={post.data.image}
                alt={post.data.title}
                width={i === 0 ? 925 : 445}
                height={i === 0 ? 475 : 230}
                loading="lazy"
              />
            </a>
        )}
        <!-- Use nav if the list is used for navigation, otherwise, ul is appropriate for a list of categories -->
        <div class="mt-6 mb-4 flex flex-wrap items-center text-text">
          <time class="mr-5 flex items-center flex-wrap font-medium" datetime={dateFormat(post.data.date, 'yyyy-mm-dd')}>
            <BiCalendarEdit className="mr-1 h-5 w-5 text-gray-600" />
            {dateFormat(post.data.date)}
          </time>
          <div class="mr-5 flex items-center flex-wrap">
            <BiCategoryAlt className="mr-1 h-[18px] w-[18px] text-gray-600" />
            <ul>
              {post.data.categories.map((category: string, index: number) => (
                <li class="inline-block">
                  <a
                    href={`/categories/${slugify(category)}`}
                    class="mr-2 hover:text-primary font-medium"
                  >
                    {humanize(category)}{index !== post.data.categories.length - 1 ? "," : ""}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        </div>
        <h3 class="mb-4">
          <a href={`/${post.slug}`} class="block hover:text-primary transition duration-300">
            {post.data.title}
          </a>
        </h3>
        <p class="text-text">
          {post.body?.slice(0, Number(i === 0 && fluid !== false ? summary_length * 2 : summary_length))}...
        </p>
      </article>
    ))
  }
</section>